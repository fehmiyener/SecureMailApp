@model IEnumerable<SecureMailApp.Models.EmailMessage>

@{
    ViewData["Title"] = "Inbox";
}

<div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="mb-0">Inbox</h2>
    <a class="btn btn-primary" asp-controller="Messages" asp-action="Compose">
        New Message
    </a>
</div>

@if (!Model.Any())
{
    <div class="alert alert-info">
        You donâ€™t have any messages yet.
    </div>
}
else
{
    <div class="card shadow-sm">
        <div class="card-body p-0">
            <table class="table table-hover mb-0">
                <thead class="table-light">
                    <tr>
                        <th>From (Email)</th>
                        <th>Subject</th>
                        <th>Date</th>
                        <th style="width: 120px;"></th>
                    </tr>
                </thead>
                <tbody>
                @foreach (var m in Model)
                {
                    <tr>
                        <td>@m.Sender.Email</td>
                        <td>@m.DecryptedSubject</td>
                        <td>@m.CreatedAt.ToString("g")</td>
                        <td class="text-end">
                            <a class="btn btn-sm btn-outline-secondary"
                               asp-controller="Messages"
                               asp-action="Details"
                               asp-route-id="@m.Id">
                                View
                            </a>
                        </td>
                    </tr>
                }
                </tbody>
            </table>
        </div>
    </div>
}
